{"title": "FCM (Firebase Cloud Messaging) Push Notification with Asp.Net", "content": "<pre><code data-enlighter-language=\"csharp\"> public class Notification\r\n{\r\n    private string serverKey = \"kkkkk\";\r\n    private string senderId = \"iiddddd\";\r\n    private string webAddr = \"https://fcm.googleapis.com/fcm/send\";\r\n\r\n    public string SendNotification(string DeviceToken, string title ,string msg )\r\n    {\r\n        var result = \"-1\";\r\n        var httpWebRequest = (HttpWebRequest)WebRequest.Create(webAddr);\r\n        httpWebRequest.ContentType = \"application/json\";\r\n        httpWebRequest.Headers.Add(string.Format(\"Authorization: key={0}\", serverKey));\r\n        httpWebRequest.Headers.Add(string.Format(\"Sender: id={0}\", senderId));\r\n        httpWebRequest.Method = \"POST\";\r\n\r\n        var payload = new\r\n        {\r\n            to = DeviceToken,\r\n            priority = \"high\",\r\n            content_available = true,\r\n            notification = new\r\n            {\r\n                body = msg,\r\n                title = title\r\n            },\r\n        };\r\n        var serializer = new JavaScriptSerializer();\r\n        using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))\r\n        {\r\n            string json = serializer.Serialize(payload);\r\n            streamWriter.Write(json);\r\n            streamWriter.Flush();\r\n        }\r\n\r\n        var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();\r\n        using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))\r\n        {\r\n            result = streamReader.ReadToEnd();\r\n        }\r\n        return result;\r\n    }\r\n}</code></pre>\n<p> </p>\n", "slug": "fcm-firebase-cloud-messaging-push-notification-with-asp-net", "date": 1522154670, "cats": [12, 13]}