{"title": "Packaging Node.js code into cross platform executables", "content": "<p>If you\u2019re writing command line tools in Node.js, it can be hard to distribute them since users need to install Node.js in their machines before being able to use your tool. It would be a lot easier for users if we can package our app into a single executable file that they can download and run without installing anything extra.</p>\n<p>We can use\u00a0<a href=\"https://github.com/zeit/pkg\" target=\"_blank\" rel=\"external noopener\">pkg</a>\u00a0to compile our code into a single executable file for multiple target platforms (Windows, Linux, Mac etc).</p>\n<p>Let\u2019s start with a simple example:</p>\n<pre><code data-enlighter-language=\"null\">// index.js\r\nconsole.log(\"hello world\");\r\n</code></pre>\n<p>This file prints \u201chello world\u201d and exits. We can package this by running:</p>\n<pre><code data-enlighter-language=\"null\">$ npx pkg index.js\r\n</code></pre>\n<p>This by default builds executables for three platforms - Windows, Linux and Mac:</p>\n<pre><code data-enlighter-language=\"null\">$ ls -1\r\nindex-linux\r\nindex-macos\r\nindex-win.exe\r\nindex.js</code></pre>\n<p>The target platforms can be customized by using the\u00a0<code>--targets</code>\u00a0<a href=\"https://github.com/zeit/pkg#targets\" target=\"_blank\" rel=\"external noopener\">flag</a>.</p>\n<p>I was curious how much space these take up:</p>\n<pre><code data-enlighter-language=\"null\">$ ls -lh\r\ntotal 183496\r\n-rwxr-xr-x  1 sheshbabu  staff    33M Mar 31 01:40 index-linux\r\n-rwxr-xr-x  1 sheshbabu  staff    34M Mar 31 01:40 index-macos\r\n-rw-r--r--  1 sheshbabu  staff    22M Mar 31 01:40 index-win.exe\r\n-rw-r--r--  1 sheshbabu  staff    28B Mar 31 00:46 index.js\r\n</code></pre>\n<p>22-34MB feels like a bit too much for something that just prints \u201chello world\u201d.</p>\n<p>Looking around the internet, it seems we can use tools like\u00a0<a href=\"https://upx.github.io/\" target=\"_blank\" rel=\"external noopener\">upx</a>\u00a0to reduce the file size.</p>\n<blockquote><p>http://www.sheshbabu.com/posts/packaging-node-js-code-into-cross-platform-executables/</p></blockquote>\n", "slug": "packaging-node-js-code-into-cross-platform-executables", "date": 1522515293, "cats": [18, 3]}